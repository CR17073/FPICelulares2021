{"remainingRequest":"/home/kevin/Universidad/FPI/gitHubProyect/fpiFinal/fpi_project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kevin/Universidad/FPI/gitHubProyect/fpiFinal/fpi_project/src/views/nuevo_anuncio.vue?vue&type=style&index=0&id=15132cd1&lang=scss&scoped=true&","dependencies":[{"path":"/home/kevin/Universidad/FPI/gitHubProyect/fpiFinal/fpi_project/src/views/nuevo_anuncio.vue","mtime":1637911724283},{"path":"/home/kevin/Universidad/FPI/gitHubProyect/fpiFinal/fpi_project/node_modules/css-loader/dist/cjs.js","mtime":1637372596514},{"path":"/home/kevin/Universidad/FPI/gitHubProyect/fpiFinal/fpi_project/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1637372597630},{"path":"/home/kevin/Universidad/FPI/gitHubProyect/fpiFinal/fpi_project/node_modules/postcss-loader/src/index.js","mtime":1637372596874},{"path":"/home/kevin/Universidad/FPI/gitHubProyect/fpiFinal/fpi_project/node_modules/sass-loader/dist/cjs.js","mtime":1637372595850},{"path":"/home/kevin/Universidad/FPI/gitHubProyect/fpiFinal/fpi_project/node_modules/cache-loader/dist/cjs.js","mtime":1637372595906},{"path":"/home/kevin/Universidad/FPI/gitHubProyect/fpiFinal/fpi_project/node_modules/vue-loader/lib/index.js","mtime":1637372597218}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5yb3cgLmlucHV0LWZpZWxkIHRleHRhcmVhOmZvY3VzIHsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjNjk0OTFhICFpbXBvcnRhbnQ7CiAgIGJveC1zaGFkb3c6IDAgMXB4IDAgMCAjNjk0OTFhICAhaW1wb3J0YW50Cn0K"},{"version":3,"sources":["nuevo_anuncio.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6YA;AACA;AACA;AACA","file":"nuevo_anuncio.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <!-- class=\"d-flex flex-sm-wrap-reverse\" -->\n  <v-container>\n    <v-row>\n      <v-col cols=\"12\" style=\"text-align: center\">\n        <h1 class=\"mt-3\">Nuevo Anuncio</h1>\n        <v-divider style=\"width: 100%\"> inset ></v-divider>\n      </v-col>\n    </v-row>\n\n    <v-row>\n      <v-col cols=\"12\">\n        <form>\n          <v-row>\n            <v-col cols=\"12\" sm=\"6\">\n              <v-radio-group label=\"Estado:\" v-model=\"anuncio.estado\" row>\n                <v-radio color=\"#4a148c\" label=\"Nuevo\" value=\"nuevo\"></v-radio>\n                <v-radio color=\"#4a148c\" label=\"Usado\" value=\"usado\"></v-radio>\n              </v-radio-group>\n              <v-text-field label=\"Marca \" v-model=\"anuncio.marca\">\n                <v-icon slot=\"prepend\"> mdi-cellphone </v-icon>\n              </v-text-field>\n              <v-text-field label=\"Modelo \" v-model=\"anuncio.modelo\"\n                ><v-icon slot=\"prepend\"> mdi-cellphone-cog </v-icon>\n              </v-text-field>\n              <v-text-field\n                label=\"Tamaño pantalla(en pulgadas) \"\n                v-model=\"anuncio.tamanio\"\n                ><v-icon slot=\"prepend\"> mdi-cellphone-screenshot </v-icon>\n              </v-text-field>\n              <v-text-field\n                label=\"Sistema operativo \"\n                v-model=\"anuncio.sistemaop\"\n                ><v-icon slot=\"prepend\">mdi-android </v-icon>\n              </v-text-field>\n              <v-text-field label=\"Memoria ROM \" v-model=\"anuncio.rom\"\n                ><v-icon slot=\"prepend\"> mdi-memory</v-icon>\n              </v-text-field>\n              <v-text-field label=\"Memoria RAM \" v-model=\"anuncio.ram\"\n                ><v-icon slot=\"prepend\"> mdi-memory</v-icon>\n              </v-text-field>\n            </v-col>\n\n            <v-col cols=\"12\" sm=\"6\">\n              <v-text-field\n                v-model=\"anuncio.titulo\"\n                class=\"mt-7\"\n                label=\"Titulo breve del anuncio \"\n                ><v-icon slot=\"prepend\"> mdi-format-text</v-icon></v-text-field\n              >\n              <v-text-field v-model=\"anuncio.vendedor\" label=\"Vendedor \"\n                ><v-icon slot=\"prepend\">\n                  mdi-account-circle</v-icon\n                ></v-text-field\n              >\n              <v-text-field\n                v-mask=\"'####-####'\"\n                v-model=\"anuncio.telefono\"\n                label=\"Numero telefonico \"\n                ><v-icon slot=\"prepend\"> mdi-phone</v-icon></v-text-field\n              >\n              <v-textarea\n                v-model=\"anuncio.descripcion\"\n                label=\"Descripcion del producto\"\n                ><v-icon slot=\"prepend\"> mdi-text-long</v-icon></v-textarea\n              >\n\n              <v-text-field\n                v-model=\"anuncio.precio\"\n                oninput=\"if(this.value < 0) this.value = 0;\"\n                type=\"number\"\n                label=\"Precio: \"\n              >\n                <v-icon slot=\"prepend\">mdi-currency-usd</v-icon>\n              </v-text-field>\n            </v-col>\n          </v-row>\n        </form>\n         <v-snackbar v-model=\"alert\" timeout=\"3000\" color=\"orange darken-3\">\n      <v-icon>mdi-cancel</v-icon>\n      Debe seleccionar antes una imagen para subirla.\n    </v-snackbar>\n\n    <v-snackbar v-model=\"msganuncio\" timeout=\"3000\" color=\"lime darken-4\">\n      <v-icon>mdi-check</v-icon>\n      Anuncio creado exitosamente\n    </v-snackbar>\n\n    <v-snackbar v-model=\"valid\" timeout=\"3000\" color=\"deep-orange darken-1\" class=\"text-center\">\n       <v-icon >mdi-alert</v-icon>\n       {{mensaje}}\n    </v-snackbar>\n      </v-col>\n    </v-row>\n\n   \n\n    <!--   class=\"order-xs-first mb-15\" -->\n    <v-row>\n      <v-col class=\"d-none d-sm-flex d-sm-none justify-center mb-15\" sm=\"6\">\n        <v-simple-table style=\"background-color:#f2ab39\">\n          <template v-slot:default>\n            <thead>\n              <tr style=\"background-color:#5f543b\">\n                <th class=\"text-left\" >#</th>\n                <th class=\"text-left\">Tamaño</th>\n                <th class=\"text-left\">Tipo</th>\n                <th class=\"text-left\">Eliminar</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"(imagen, index) in imagenes\" :key=\"index\" style=\"background-color:#988249\">\n                <td>{{ index+1 }}</td>\n                <td>{{ imagen.tamanio }} kb</td>\n                <td>{{ imagen.tipo }}</td>\n                <td>\n                  <v-btn\n                    @click=\"eliminar_foto(index, imagen.name)\"\n                    class=\"red\"\n                    icon\n                  >\n                    <v-icon> mdi-minus </v-icon></v-btn\n                  >\n                </td>\n              </tr>\n            </tbody>\n          </template>\n        </v-simple-table>\n      </v-col>\n\n      <v-col cols=\"12\" sm=\"6\" class=\"\">\n        <v-card\n          class=\"justify-center ml-4 mt-6\"\n          flat\n          color=\"#FAF5B4\"\n          width=\"80%\"\n          height=\"100%\"\n        >\n          <v-row>\n            <v-col cols=\"12\">\n              <v-carousel v-model=\"model\" height=\"200px\" width=\"70%\">\n                <v-carousel-item\n                  contain\n                  v-for=\"(foto, index) in imagenes\"\n                  :key=\"index\"\n                  width=\"100%\"\n                  style=\"height: 100%\"\n                >\n                  <v-sheet height=\"100%\" width=\"100%\" tile elevation=\"10\">\n                    <v-img contain :src=\"foto.link\" width=\"100%\" height=\"100%\">\n                      <v-progress-circular\n                        v-if=\"cargando\"\n                        absolute\n                        justify=\"center\"\n                        indeterminate\n                        color=\"purple\"\n                      ></v-progress-circular>\n                    </v-img>\n                  </v-sheet>\n                </v-carousel-item>\n              </v-carousel>\n               \n            </v-col>\n             \n             <v-col cols=\"10\" sm=\"9\">\n            <v-file-input\n                accept=\"image/*\"\n                outlined\n                class=\"mb-10\"\n                v-model=\"imagen2\"\n              ></v-file-input>\n            </v-col>\n            <v-col cols=\"2\" sm=\"1\">\n              <v-btn\n                @click=\"subir_imagen\"\n                color=\"white\"\n                style=\"background-color: #69491a\"\n                icon\n                fab\n                ><v-icon>mdi-plus</v-icon></v-btn\n              >\n            </v-col> \n          </v-row>\n        </v-card>\n      </v-col>\n    </v-row>\n\n    <v-footer fixed color=\"#f2ab39\">\n      <v-row class=\"justify-center\">\n        <v-col cols=\"6\" sm=\"4\">\n          <v-btn to=\"/\" block style=\"color: white\" color=\"red darken-4\"\n            >Cancelar</v-btn\n          >\n        </v-col>\n        <v-col cols=\"6\" sm=\"4\">\n          <v-btn\n            @click=\"validaciones\"\n            block\n            style=\"color: white\"\n            color=\"#69491a\"\n            >Crear anuncio</v-btn\n          >\n        </v-col>\n      </v-row>\n    </v-footer>\n\n  </v-container>\n</template>\n<script>\nimport { db, st } from \"../firebase\";\n\nexport default {\n  name: \"anuncio\",\n  mounted() {\n    // this.crear_anuncio();\n  },\n  data: () => ({\n    valid:false,\n    mensaje:\"\",\n    msganuncio: false,\n    id_foto: 1,\n    // id_anuncio: \"\",\n    cargando: false,\n    alert: false,\n    contador: 0,\n    codigo: \"\",\n    imagen2: null,\n    model: 0,\n    anuncio: {\n      estado: \"\",\n      marca: \"\",\n      modelo: \"\",\n      tamanio: \"\",\n      sistemaop: \"\",\n      rom: \"\",\n      ram: \"\",\n      titulo: \"\",\n      vendedor: \"\",\n      telefono: \"\",\n      descripcion: \"\",\n      precio: 0,\n      fecha: \"\",\n    },\n    imagen:\n      \"https://st3.depositphotos.com/23594922/31822/v/600/depositphotos_318221368-stock-illustration-missing-picture-page-for-website.jpg\",\n    estado: \"\",\n    imagenes: [],\n  }),\n  created() {\n    this.numero_random();\n  },\n  methods: {\n    async crear_anuncio() {\n      this.anuncio.precio = parseInt(this.anuncio.precio);\n      this.anuncio.fecha = new Date();\n      let this2 = this;\n      await db\n        .collection(\"anuncios\")\n        .doc(this2.codigo)\n        .set(this2.anuncio)\n        .then(function () {\n          this2.$router.push(\"/\");\n        })\n        .catch((error) => {\n          console.error(\"error:\", error);\n        });\n    },\n    // guardarAnuncio() {\n    //   this.anuncio.precio=parseInt(this.anuncio.precio);\n    //   let this2=this;\n    //   db.collection(\"anuncios\")\n    //     .doc(this.id_anuncio).update(this.anuncio).then(function(){\n    //        this2.$router.push(\"/\");\n    //     })\n    // },\n    async subir_imagen() {\n      this.cargando = true;\n      if (this.imagen2) {\n        let this2 = this;\n        this.contador++;\n        try {\n          const refs = st.ref();\n          const imgref = await refs\n            .child(this.codigo)\n            .child(this.contador + \".jpg\");\n          imgref.put(this.imagen2).then(function () {\n            this2.traer_imagen();\n          });\n        } catch (error) {\n          console.log(error);\n        }\n      } else {\n        this.alert = true;\n      }\n    },\n    async traer_imagen() {\n      const refs = st.ref();\n      let this2 = this;\n      await refs\n        .child(this.codigo + \"/\")\n        .listAll()\n        .then(function (result) {\n          result.items.forEach(function (imgRefe) {\n            let nombre = imgRefe.name;\n            if (nombre == this2.contador + \".jpg\") {\n              let nueva_imagen = {};\n              imgRefe.getMetadata().then(function (metadata) {\n                nueva_imagen.name = nombre;\n                nueva_imagen.tamanio = metadata.size / 1000;\n                nueva_imagen.tipo = metadata.contentType;\n              });\n              imgRefe.getDownloadURL().then(function (url) {\n                nueva_imagen.link = url;\n                this2.imagenes.push(nueva_imagen);\n                this2.cargando = false;\n                this2.imagen2 = null;\n                // if (this2.contador == 1) {\n                //   this2.imagenes.shift();\n                // }\n              });\n            }\n          });\n        });\n    },\n    eliminar_foto(indice, nombre) {\n      const refs = st.ref();\n      let this2 = this;\n      var imgref = refs.child(this.codigo + \"/\" + nombre);\n\n      imgref\n        .delete()\n        .then(function () {\n          this2.imagenes.splice(indice, 1);\n          this2.contador--;\n        })\n        .catch(function (error) {\n          console.log(\"No se borro la imagen: \" + error);\n        });\n    },\n    numero_random() {\n      this.codigo = Math.random().toString(36).substr(2, 20);\n      console.log(this.codigo);\n    },\n    \n         validaciones(){\n           if(this.mensaje==\"\"){\n               this.valid = true;\n              this.mensaje=\"Todos los campos son obligatorios\";\n           }\n          else if(this.anuncio.marca ==\"\"){\n              this.valid = true;\n              this.mensaje=\" Marca es requerido\";\n           }\n           else if(this.anuncio.modelo==\"\"){\n             this.valid = true;\n              this.mensaje=\"Necesitas llenar el campo Modelo\";\n           }\n           else if(this.anuncio.tamanio==\"\"){\n             this.valid = true;\n              this.mensaje=\"Necesitas llenar el campo Tamaño de pantalla \";\n           }\n           else if(this.anuncio.tamanio==\"\"){\n             this.valid = true;\n              this.mensaje=\"Necesitas llenar el campo [Sistema operativo] \";\n           }\n           else if(this.anuncio.tamanio==\"\"){\n             this.valid = true;\n              this.mensaje=\"Necesitas llenar el campo [Memoria ROM] \";\n           }else if(this.anuncio.tamanio==\"\"){\n             this.valid = true;\n              this.mensaje=\"Necesitas llenar el campo [Memoria RAM] \";\n           }else if(this.anuncio.tamanio==\"\"){\n             this.valid = true;\n              this.mensaje=\"Es necesario establecer un titulo a su anuncio\";\n           }else if(this.anuncio.tamanio==\"\"){\n             this.valid = true;\n              this.mensaje=\"Es obligatorio el nombre del vendedor\";\n           }else if(this.anuncio.tamanio==\"\"){\n             this.valid = true;\n              this.mensaje=\"El campo Telefono es obligatorio \";\n           }else if((this.anuncio.tamanio ==\"\") && (this.anuncio.descripcion.length >10)){\n             this.valid = true;\n              this.mensaje=\"Describe tu producto con almenos 10 caracteres \";\n           }else if(this.imagen2==null){\n             this.valid = true;\n              this.mensaje=\"Necesitas colocar almenos una foto de tu producto\";\n           }\n           \n           else{\n              this.crear_anuncio()\n             this.msganuncio=true;\n           }\n         }\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.row .input-field textarea:focus {\n    border-bottom: 1px solid #69491a !important;\n   box-shadow: 0 1px 0 0 #69491a  !important\n}\n</style>"]}]}