{"remainingRequest":"/home/kevin/Universidad/FPI/gitHubProyect/fpiFinal/fpi_project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kevin/Universidad/FPI/gitHubProyect/fpiFinal/fpi_project/src/components/datos.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/kevin/Universidad/FPI/gitHubProyect/fpiFinal/fpi_project/src/components/datos.vue","mtime":1637854660079},{"path":"/home/kevin/Universidad/FPI/gitHubProyect/fpiFinal/fpi_project/node_modules/cache-loader/dist/cjs.js","mtime":1637372595906},{"path":"/home/kevin/Universidad/FPI/gitHubProyect/fpiFinal/fpi_project/node_modules/babel-loader/lib/index.js","mtime":1637372596910},{"path":"/home/kevin/Universidad/FPI/gitHubProyect/fpiFinal/fpi_project/node_modules/cache-loader/dist/cjs.js","mtime":1637372595906},{"path":"/home/kevin/Universidad/FPI/gitHubProyect/fpiFinal/fpi_project/node_modules/vue-loader/lib/index.js","mtime":1637372597218}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGRiLCBzdCB9IGZyb20gIi4uL2ZpcmViYXNlIjsKaW1wb3J0IHtidXN9IGZyb20gIi4uL21haW4iCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImRhdG9zIiwKICBwcm9wczogewogICAgcHJvZHVjdG9zOiBOdW1iZXIsCiAgICBwYWdlOiBOdW1iZXIsCiAgICBvcmRlbjogU3RyaW5nLAogICAgZGVzZGU6IFN0cmluZywKICAgIGhhc3RhOiBTdHJpbmcsCiAgfSwKICBkYXRhOiAoKSA9PiAoewogICAgYnVzY2Fkb3I6IiIsCiAgICAgbWFyY2FzOltdLAogICAgc2lzdGVtYXM6W10sCiAgICBwYW50YWxsYXM6W10sCiAgICBwYXJ0aWRhbENlbHVsOiBbXSwKICAgIGxpbWl0OiAwLAogICAgaW5pY2lvOiAwLAogICAgY29udGFkb3I6IDAsCiAgICBjZWx1bGFyOiB7fSwKICAgIGNlbHVsYXJlczogW10sCiAgICBhbnVuY2lvczogW10sCiAgfSksCiAgY3JlYXRlZCgpIHsKICAgIGJ1cy4kb24oImZpbHRyb1NlYXJjaCIsIChkYXRhKT0+ewogICAgICAKICAgICAgdGhpcy5idXNjYWRvcj1kYXRhOwogICAgICB0aGlzLmZpbHRyYXJQb3JCdXNjYWRvcigpOwogICAgfSkKCiAgICBidXMuJG9uKCJjYW1iaW9zRW5GaWx0cm8iLCAoZGF0YSk9PnsKICAgICAgdGhpcy5tYXJjYXM9ZGF0YS5tYXJjYTsKICAgICAgdGhpcy5zaXN0ZW1hcz1kYXRhLnNpc3RlbWE7CiAgICAgIHRoaXMucGFudGFsbGFzPWRhdGEucGFudGFsbGE7CiAgICAgIHRoaXMuZmlsdHJhcigpOwogICAgfSkKCiAgICB0aGlzLnRyYWVyQ2VsdWxhcmVzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyB0cmFlckNlbHVsYXJlcygpIHsKICAgICAgdGhpcy5saW1pdCA9IHRoaXMucGFnZSAqIHRoaXMucHJvZHVjdG9zOwogICAgICB0aGlzLmluaWNpbyA9IHRoaXMubGltaXQgLSB0aGlzLnByb2R1Y3RvczsKICAgICAgdGhpcy5jZWx1bGFyZXMgPSBbXTsKICAgICAgbGV0IHRoaXMyID0gdGhpczsKCiAgICAgIGF3YWl0IGRiCiAgICAgICAgLmNvbGxlY3Rpb24oImFudW5jaW9zIikKICAgICAgICAub3JkZXJCeSh0aGlzLm9yZGVuLCAiZGVzYyIpCiAgICAgICAgLmxpbWl0KHRoaXMubGltaXQpCiAgICAgICAgLmdldCgpCiAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24gKHF1ZXJ5KSB7CiAgICAgICAgICBmb3IgKGNvbnN0IGRvYyBvZiBxdWVyeS5kb2NzKSB7CiAgICAgICAgICAgIGxldCBhbnVuY2lvID0gewogICAgICAgICAgICAgIGlkOiBkb2MuaWQsCiAgICAgICAgICAgICAgcHJlY2lvOiBkb2MuZGF0YSgpLnByZWNpbywKICAgICAgICAgICAgICBtYXJjYTogZG9jLmRhdGEoKS5tYXJjYSwKICAgICAgICAgICAgICBkZXNjcmlwY2lvbjogZG9jLmRhdGEoKS5kZXNjcmlwY2lvbiwKICAgICAgICAgICAgICBwYW50YWxsYTogZG9jLmRhdGEoKS50YW1hbmlvLAogICAgICAgICAgICAgIHNpc3RlbWE6ZG9jLmRhdGEoKS5zaXN0ZW1hb3AsCiAgICAgICAgICAgICAgbW9kZWxvOiBkb2MuZGF0YSgpLm1vZGVsbywKICAgICAgICAgICAgICBpbWFnZW46IGF3YWl0IHN0CiAgICAgICAgICAgICAgICAucmVmKCkKICAgICAgICAgICAgICAgIC5jaGlsZChkb2MuaWQgKyAiLzEuanBnIikKICAgICAgICAgICAgICAgIC5nZXREb3dubG9hZFVSTCgpLAogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdGhpczIuY2VsdWxhcmVzLnB1c2goYW51bmNpbyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIHRoaXMucGFydGlkYWxDZWx1bCA9IHRoaXMuY2VsdWxhcmVzOwogICAgICB0aGlzLnJlY29ycmVyRGF0b3MoKTsKICAgIH0sCiAgICByZWNvcnJlckRhdG9zKCkgewogICAgICB0aGlzLmFudW5jaW9zID0gW107CiAgICAgIGZvciAobGV0IGkgPSB0aGlzLmluaWNpbzsgaSA8IHRoaXMubGltaXQ7IGkrKykgewogICAgICAgIGlmIChpIDwgdGhpcy5jZWx1bGFyZXMubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLmFudW5jaW9zLnB1c2godGhpcy5jZWx1bGFyZXNbaV0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBvcmRlckJ5UHJlY2lvKCkgewogICAgICB0aGlzLmNlbHVsYXJlcyA9IHRoaXMucGFydGlkYWxDZWx1bDsKICAgICAgbGV0IGRhdG9zcG9yUHJlY2lvID0gW107CiAgICAgIGxldCB0aGlzMiA9IHRoaXM7CiAgICAgIHRoaXMuY2VsdWxhcmVzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnRvKSB7CiAgICAgICAgaWYgKGVsZW1lbnRvLnByZWNpbyA+PSB0aGlzMi5kZXNkZSAmJiBlbGVtZW50by5wcmVjaW8gPD0gdGhpczIuaGFzdGEpIHsKICAgICAgICAgIGRhdG9zcG9yUHJlY2lvLnB1c2goZWxlbWVudG8pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIC8vIGlmIChkYXRvc3BvclByZWNpby5sZW5ndGggPiAwKSB7CiAgICAgICAgLy8gdGhpcy5jZWx1bGFyZXMgPSBbXTsKICAgICAgICB0aGlzLmNlbHVsYXJlcyA9IGRhdG9zcG9yUHJlY2lvOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2VsdWxhcmVzKTsKICAgICAgICB0aGlzLnJlY29ycmVyRGF0b3MoKTsKICAgICAgLy8gfQogICAgfSwKICAgIGZpbHRyYXIoKXsKICAgICAgbGV0IGVuY29udHJhZG9zPTA7CiAgICAgIGxldCBmaWx0cm9zQWN0aXZvcz1bXTsKICAgICAgbGV0IHRoaXMyPXRoaXM7CiAgICAgIGlmKHRoaXMubWFyY2FzPT0wICYmIHRoaXMucGFudGFsbGFzPT0wICYmIHRoaXMuc2lzdGVtYXM9PTApewogICAgICAgIHRoaXMucmVjb3JyZXJEYXRvcygpOwogICAgICB9ZWxzZXsKICAgICAgICB0aGlzLmNlbHVsYXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50bykgewogICAgICAgICAgZm9yKGNvbnN0IG1hcmNhIG9mIHRoaXMyLm1hcmNhcyl7CiAgICAgICAgICAgICAgaWYobWFyY2E9PWVsZW1lbnRvLm1hcmNhKXsKICAgICAgICAgICAgICBlbmNvbnRyYWRvcz0xOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBmb3IoY29uc3QgcGFudGFsbGEgb2YgdGhpczIucGFudGFsbGFzKXsKICAgICAgICAgICAgaWYocGFudGFsbGE9PWVsZW1lbnRvLnBhbnRhbGxhKXsKICAgICAgICAgICAgICBlbmNvbnRyYWRvcz0xOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBmb3IoY29uc3Qgc2lzdGVtYSBvZiB0aGlzMi5zaXN0ZW1hcyl7CiAgICAgICAgICAgIGlmKHNpc3RlbWE9PWVsZW1lbnRvLnNpc3RlbWEpewogICAgICAgICAgICAgIGVuY29udHJhZG9zPTE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmKGVuY29udHJhZG9zPT0xKXsKICAgICAgICAgIGZpbHRyb3NBY3Rpdm9zLnB1c2goZWxlbWVudG8pOwogICAgICAgICAgfQoKICAgICAgIAogICAgICAgICAgZW5jb250cmFkb3M9MDsKICAgICAgICB9KTsKICAgICAgCiAgICAgICAgdGhpcy5hbnVuY2lvcz1maWx0cm9zQWN0aXZvczsKICAgICAgCiAgICAgIH0KICAgICAgIAogICAgIAogICAgfSwKICAgIGZpbHRyYXJQb3JCdXNjYWRvcigpewogICAgICBsZXQgY29pbmNpZGVuY2lhcz1bXTsKICAgICAgbGV0IHRoaXMyPXRoaXM7CiAgICAgIGlmKHRoaXMuYnVzY2Fkb3I9PT0iIil7CiAgICAgICAgdGhpcy5yZWNvcnJlckRhdG9zKCk7CiAgICAgIH1lbHNlewogICAgICAgICAgdGhpcy5jZWx1bGFyZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudG8pIHsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZWxlbWVudG8pOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzMi5idXNjYWRvcisiLSIrZWxlbWVudG8ubW9kZWxvKQogICAgICAgICBpZih0aGlzMi5idXNjYWRvcj09PWVsZW1lbnRvLm1vZGVsbyl7CiAgICAgICAgICAgY29pbmNpZGVuY2lhcy5wdXNoKGVsZW1lbnRvKTsKICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYoY29pbmNpZGVuY2lhcy5sZW5ndGg+MCl7CiAgICAgICAgLy8gY29uc29sZS5sb2coImVudHJhIikKICAgICAgICB0aGlzLmFudW5jaW9zPWNvaW5jaWRlbmNpYXM7CiAgICAgIH1lbHNlewogICAgICAgIC8vIGNvbnNvbGUubG9nKCJubyBlbnRyYSIpCiAgICAgICAgICB0aGlzLnJlY29ycmVyRGF0b3MoKTsKICAgICAgfQoKICAgIH0sCiAgICB2ZXJhbnVuY2lvKGlkKXsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiYW51bmNpby8iK2lkKTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBwcm9kdWN0b3M6IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgLy8gdGhpcy5hbnVuY2lvcyA9IFtdOwogICAgICBjb25zb2xlLmxvZyh2YWwpOwogICAgICB0aGlzLnRyYWVyQ2VsdWxhcmVzKCk7CiAgICB9LAogICAgcGFnZTogZnVuY3Rpb24gKHZhbCkgewogICAgICAvLyB0aGlzLmFudW5jaW9zID0gW107CiAgICAgIGNvbnNvbGUubG9nKHZhbCk7CiAgICAgIHRoaXMudHJhZXJDZWx1bGFyZXMoKTsKICAgIH0sCiAgICBvcmRlbjogZnVuY3Rpb24gKHZhbCkgewogICAgICB0aGlzLnRyYWVyQ2VsdWxhcmVzKCk7CiAgICAgIGNvbnNvbGUubG9nKHZhbCk7CiAgICB9LAogICAgaGFzdGE6IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgaWYgKHRoaXMuaGFzdGEgPiAwKSB7CiAgICAgICAgIGxldCByZXN0YT12YWwtdGhpcy5kZXNkZTsKICAgICAgICBpZiAocmVzdGE+MCkgewogIAogICAgICAgICAgdGhpcy5vcmRlckJ5UHJlY2lvKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHZhbCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZGVzZGU6IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgaWYgKHRoaXMuaGFzdGEgPiAwKSB7CiAgICAgICAgbGV0IHJlc3RhPXRoaXMuaGFzdGEtdmFsOwogICAgICAgIGlmIChyZXN0YT4wKSB7CiAgICAgICAgICB0aGlzLm9yZGVyQnlQcmVjaW8oKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2codmFsKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["datos.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"datos.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-row style=\"width: 100%\">\n    <v-col\n    md=\"4\"\n      lg=\"3\"\n      cols=\"6\" \n      v-for=\"(cel, index) in anuncios\"\n      :key=\"index\"\n    >\n      <v-card elevation=\"6\" class=\"ma-1\" max-height=\"350\"  max-width=\"374\">\n        <v-img contain height=\"250\" max-height=\"260\" :src=\"cel.imagen\" class=\"\"></v-img>\n        <v-card-title >\n          <v-row>\n            <v-col cols=\"12\" >\n              <v-btn @click=\"veranuncio(cel.id)\" color=\"#4a148c\" dark small absolute right>Ver mas </v-btn>\n          ${{ cel.precio }}\n            </v-col>\n          </v-row>\n          </v-card-title\n        >\n        <v-card-text>\n          <v-row align=\"center\" class=\"mx-0 overflow-ellipsis\">\n            <v-col cols=\"12\">\n             <p class=\"overflow-ellipsis\"> {{ cel.descripcion }}</p>\n            </v-col>\n            </v-row>\n            </v-card-text>\n      </v-card>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport { db, st } from \"../firebase\";\nimport {bus} from \"../main\"\n\nexport default {\n  name: \"datos\",\n  props: {\n    productos: Number,\n    page: Number,\n    orden: String,\n    desde: String,\n    hasta: String,\n  },\n  data: () => ({\n    buscador:\"\",\n     marcas:[],\n    sistemas:[],\n    pantallas:[],\n    partidalCelul: [],\n    limit: 0,\n    inicio: 0,\n    contador: 0,\n    celular: {},\n    celulares: [],\n    anuncios: [],\n  }),\n  created() {\n    bus.$on(\"filtroSearch\", (data)=>{\n      \n      this.buscador=data;\n      this.filtrarPorBuscador();\n    })\n\n    bus.$on(\"cambiosEnFiltro\", (data)=>{\n      this.marcas=data.marca;\n      this.sistemas=data.sistema;\n      this.pantallas=data.pantalla;\n      this.filtrar();\n    })\n\n    this.traerCelulares();\n  },\n  methods: {\n    async traerCelulares() {\n      this.limit = this.page * this.productos;\n      this.inicio = this.limit - this.productos;\n      this.celulares = [];\n      let this2 = this;\n\n      await db\n        .collection(\"anuncios\")\n        .orderBy(this.orden, \"desc\")\n        .limit(this.limit)\n        .get()\n        .then(async function (query) {\n          for (const doc of query.docs) {\n            let anuncio = {\n              id: doc.id,\n              precio: doc.data().precio,\n              marca: doc.data().marca,\n              descripcion: doc.data().descripcion,\n              pantalla: doc.data().tamanio,\n              sistema:doc.data().sistemaop,\n              modelo: doc.data().modelo,\n              imagen: await st\n                .ref()\n                .child(doc.id + \"/1.jpg\")\n                .getDownloadURL(),\n            };\n\n            this2.celulares.push(anuncio);\n          }\n        });\n      this.partidalCelul = this.celulares;\n      this.recorrerDatos();\n    },\n    recorrerDatos() {\n      this.anuncios = [];\n      for (let i = this.inicio; i < this.limit; i++) {\n        if (i < this.celulares.length) {\n          this.anuncios.push(this.celulares[i]);\n        } else {\n          break;\n        }\n      }\n    },\n    orderByPrecio() {\n      this.celulares = this.partidalCelul;\n      let datosporPrecio = [];\n      let this2 = this;\n      this.celulares.forEach(function (elemento) {\n        if (elemento.precio >= this2.desde && elemento.precio <= this2.hasta) {\n          datosporPrecio.push(elemento);\n        }\n      });\n      // if (datosporPrecio.length > 0) {\n        // this.celulares = [];\n        this.celulares = datosporPrecio;\n        console.log(this.celulares);\n        this.recorrerDatos();\n      // }\n    },\n    filtrar(){\n      let encontrados=0;\n      let filtrosActivos=[];\n      let this2=this;\n      if(this.marcas==0 && this.pantallas==0 && this.sistemas==0){\n        this.recorrerDatos();\n      }else{\n        this.celulares.forEach(function (elemento) {\n          for(const marca of this2.marcas){\n              if(marca==elemento.marca){\n              encontrados=1;\n            }\n          }\n          for(const pantalla of this2.pantallas){\n            if(pantalla==elemento.pantalla){\n              encontrados=1;\n            }\n          }\n          for(const sistema of this2.sistemas){\n            if(sistema==elemento.sistema){\n              encontrados=1;\n            }\n          }\n          if(encontrados==1){\n          filtrosActivos.push(elemento);\n          }\n\n       \n          encontrados=0;\n        });\n      \n        this.anuncios=filtrosActivos;\n      \n      }\n       \n     \n    },\n    filtrarPorBuscador(){\n      let coincidencias=[];\n      let this2=this;\n      if(this.buscador===\"\"){\n        this.recorrerDatos();\n      }else{\n          this.celulares.forEach(function (elemento) {\n            // console.log(elemento);\n            // console.log(this2.buscador+\"-\"+elemento.modelo)\n         if(this2.buscador===elemento.modelo){\n           coincidencias.push(elemento);\n         }\n          });\n      }\n      if(coincidencias.length>0){\n        // console.log(\"entra\")\n        this.anuncios=coincidencias;\n      }else{\n        // console.log(\"no entra\")\n          this.recorrerDatos();\n      }\n\n    },\n    veranuncio(id){\n        this.$router.push(\"anuncio/\"+id);\n    }\n  },\n  watch: {\n    productos: function (val) {\n      // this.anuncios = [];\n      console.log(val);\n      this.traerCelulares();\n    },\n    page: function (val) {\n      // this.anuncios = [];\n      console.log(val);\n      this.traerCelulares();\n    },\n    orden: function (val) {\n      this.traerCelulares();\n      console.log(val);\n    },\n    hasta: function (val) {\n      if (this.hasta > 0) {\n         let resta=val-this.desde;\n        if (resta>0) {\n  \n          this.orderByPrecio();\n        } else {\n          console.log(val);\n        }\n      }\n    },\n    desde: function (val) {\n      if (this.hasta > 0) {\n        let resta=this.hasta-val;\n        if (resta>0) {\n          this.orderByPrecio();\n        } else {\n          console.log(val);\n        }\n      }\n    },\n  },\n};\n</script>\n<style scoped>\np {\n  /* BOTH of the following are required for text-overflow */\n  white-space: nowrap;\n  overflow: hidden;\n}\n  .overflow-ellipsis {\n  text-overflow: ellipsis;\n}\n</style>"]}]}